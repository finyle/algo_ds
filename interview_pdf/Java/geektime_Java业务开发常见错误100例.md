# https://time.geekbang.org/column/intro/100047701?utm_campaign=geektime_search&utm_content=geektime_search&utm_medium=geektime_search&utm_source=geektime_search&utm_term=geektime_search&tab=intro
#### exp
```
比如，我曾听说过有一个订单量很大的项目，每天总有上千份订单的状态或流程有问题，需要花费大量的时间来核对数据，修复订单状态。开发同学因为每天牵扯太多经历在排查问题上，根本没时间开发新需求。技术负责人为此头痛不已，无奈之下招了专门的技术支持人员。最后痛定思痛，才决定开启明细日志彻查这个问题，结果发现是自调用方法导致事务没生效的坑。
再比如，有个朋友告诉我，他们的金融项目计算利息的代码中，使用了 float 类型而不是 BigDecimal 类来保存和计算金额，导致给用户结算的每一笔利息都多了几分钱。好在，日终对账及时发现了问题。试想一下，结算的有上千个用户，每个用户有上千笔小订单，如果等月终对账的时候再发现，可能已经损失了几百万。
再比如，我们使用 RabbitMQ 做异步处理，业务处理失败的消息会循环不断地进入 MQ。问题爆发之前，可能只影响了消息处理的时效性。但等 MQ 彻底瘫痪时，面对 MQ 中堆积的、混杂了死信和正常消息的几百万条数据，你除了清空又能怎么办。但清空 MQ，就意味着要花费几小时甚至几十小时的时间，来补正常的业务数据，对业务影响时间很长。
```

# 代码篇
### 1. 使用了并发工具类库，线程安全就高枕无忧？ ThreadLocal, ConcurrentHashMap, CopyOnWriteArrayList
#### 没有意识到线程重用导致用户信息错乱的 Bug
#### 使用了线程安全的并发工具，并不代表解决了所有线程安全问题
#### 没有充分了解并发工具的特性，从而无法发挥其威力
#### 没有认清并发工具的使用场景，因而导致性能问题

### 2.  代码加锁: synchronized
#### 加锁前要清楚锁和被保护的对象是不是一个层面的
#### 加锁要考虑锁的粒度和场景问题
#### 多把锁要小心死锁问题

### 3. 线程池： 业务代码最常用也最容易犯错的组件: 
#### 线程池的声明需要手动进行
#### 线程池线程管理策略详解
#### 务必确认清楚线程池本身是不是复用的

### 4. 连接池： 别让连接池帮倒忙： redis, http, MySQL 连接池
#### 注意鉴别客户端 SDK 是否基于连接池
#### 使用连接池务必确保复用
#### 连接池的配置不是一成不变的

### 5. HTTP调用： 考虑超时，重试，并发？ ApacheHttpClient, RestTemplate, OpenFeign
#### 配置连接超时和读取超时参数的学问
#### Feign 和 Ribbon 配合使用，你知道怎么配置超时吗？
#### 并发限制了爬虫的抓取能力

### 6. 20%的业务代码的Spring声明式事务，可能都没处理正确
#### 小心 Spring 的事务可能没有生效
#### 事务即便生效也不一定能回滚
#### 请确认事务传播配置是否符合自己的业务逻辑

### 7. 数据库索引： 索引不是万能药
#### InnoDB 是如何存储数据的？
#### 聚簇索引和二级索引
#### 考虑额外创建二级索引的代价
#### 不是所有针对索引列的查询都能用上索引
#### 数据库基于成本决定是否走索引

### 8. 判等问题： 程序里如何确定:  ==, equals
#### 注意 equals 和 == 的区别
#### 实现一个 equals 没有这么简单
#### hashCode 和 equals 要配对实现
#### 注意 compareTo 和 equals 的逻辑一致性
#### 小心 Lombok 生成代码的“坑”

### 9. 数值计算： 注意精度，舍入和溢出问题
#### “危险”的 Double
#### 考虑浮点数舍入和格式化的方式
#### 用 equals 做判等，就一定是对的吗？
#### 小心数值溢出问题

### 10. 集合类： 坑满地的List列表操作
#### 使用 Arrays.asList 把数据转换为 List 的三个坑
#### 使用 List.subList 进行切片操作居然会导致 OOM？
#### 一定要让合适的数据结构做合适的事情

### 11. 空值处理： 分不清楚的null和恼人的空指针: Optional
#### 修复和定位恼人的空指针问题
#### POJO 中属性的 null 到底代表了什么？
#### 小心 MySQL 中有关 NULL 的三个坑

### 12. 异常处理：别让自己在出问题时变成瞎子 try catch
#### 捕获和处理异常容易犯的错
#### 小心 finally 中的异常
#### 千万别把异常定义为静态变量
#### 提交线程池的任务出了异常会怎么样？

### 13. 日志： 日志记录没那么简单 log
#### 为什么我的日志会重复记录？
#### 使用异步日志改善性能的坑
#### 使用日志占位符就不需要进行日志级别判断了？

### 14. 文件IO: 实现高效正确的文件读写并非易事
#### 文件读写需要确保字符编码一致
#### 使用 Files 类静态方法进行文件操作注意释放文件句柄
#### 注意读写文件要考虑设置缓冲区
 
### 15.序列化； 一来一回，还是原来的？
#### 序列化和反序列化需要确保算法一致
#### 注意 Jackson JSON 反序列化对额外字段的处理
#### 反序列化时要小心类的构造方法
#### 枚举作为 API 接口参数或返回值的两个大坑

### 16. 用好Java8的日期实践类，少踩一些“老三样”的坑
#### 初始化日期时间
#### “恼人”的时区问题
#### 日期时间格式化和解析
#### 日期时间的计算

### 17. 别以为“自动挡”就不可能出现OOM
#### 太多份相同的对象导致 OOM
#### 使用 WeakHashMap 不等于不会 OOM
#### Tomcat 参数配置不合理导致 OOM

### 18. 当反射，注解和泛型遇到OOP时，会有那些坑？
#### 反射调用方法不是以传参决定重载
#### 泛型经过类型擦除多出桥接方法的坑
#### 注解可以继承吗？

### 19. Spring 框架： IoC 和 AOP 是扩展的核心
#### 单例的 Bean 如何注入 Prototype 的 Bean？
#### 监控切面因为顺序问题导致 Spring 事务失效

### 20. Spring 框架： 做了很多工作，也带来了复杂度
#### Feign AOP 切不到的诡异案例
#### Spring 程序配置的优先级问题

# ########################
# 设计篇
### 21 代码重复： 搞定代码重复的三个方法
#### 利用工厂模式 + 模板方法模式，消除 if…else 和重复代码
#### 利用注解 + 反射消除重复代码
#### 利用属性拷贝工具消除重复代码

### 22. 接口设计： 系统间对话的语言，一定要统一
#### 接口的响应要明确表示接口的处理结果
#### 要考虑接口变迁的版本控制策略
#### 接口处理方式要明确同步还是异步

### 23. 缓存设计： 缓存可以锦上添花可以刻落井下石
#### 不要把 Redis 当作数据库
#### 注意缓存雪崩问题
#### 注意缓存击穿问题
#### 注意缓存穿透问题
#### 注意缓存数据同步策略

### 24. 业务代码写完，就意味着生产就绪？ spring actutor
#### 准备工作：配置 Spring Boot Actuator
#### 健康检测需要触达关键组件
#### 对外暴露应用内部重要组件的状态
#### 指标 Metrics 是快速定位问题的“金钥匙”

### 25. 异步处理好用，但很容易出错
#### 异步处理需要消息补偿闭环
#### 注意消息模式是广播还是工作队列
#### 别让死信堵塞了消息队列

### 26. 数据存储： NoSQL与RDBMS如何取长补短，相辅相成
#### 取长补短之 Redis vs MySQL
#### 取长补短之 InfluxDB vs MySQL
#### 取长补短之 Elasticsearch vs MySQL
#### 结合 NoSQL 和 MySQL 应对高并发的复合数据库架构

# ##########################
# 安全篇
### 27. 数据源头： 任何客户端的东西都不可信任
#### 客户端的计算不可信
#### 客户端提交的参数需要校验
#### 不能信任请求头里的任何内容
#### 用户标识不能从客户端获取


### 28. 安全兜底： 设计钱时，必须考虑防刷，限量和防重(28)
#### 开放平台资源的使用需要考虑防刷
#### 虚拟资产并不能凭空产生无限使用
#### 钱的进出一定要和订单挂钩并且实现幂等

### 29. 数据和代码： 数据是数据 代码是代码
#### SQL 注入能干的事情比你想象的更多
#### 小心动态执行代码时代码注入漏洞
#### XSS 必须全方位严防死堵

### 30. 敏感数据： 如何正确保存和传输敏感数据？
#### 应该怎样保存用户密码？
#### 应该怎么保存姓名和身份证？
#### 用一张图说清楚 HTTPS


# ############################
# 加餐：
# Java8 中的重要知识点 lambda, stream

# 定位应用问题， 排错套路很重要

# 分析定位Java问题，常用工具 wat, arthas
